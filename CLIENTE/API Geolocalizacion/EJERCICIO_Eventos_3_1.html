<!DOCTYPE html>
<html>
  <head>
  	<meta charset="utf-8">
  	<style type="text/css">
  	/* TENEMOS QUE DARLE UN TAMAÑO AL DIV QUE CONTIENE EL MAPA. SI NO, NO SE VERÁ  */
      #divmapa {
      	width: 700px;
      	height: 700px;
      	border: 1px solid blue; 
     	}
    </style>
  	
    <title>API v3 de Google Maps. Ejemplo Eventos 3</title>
    
    <script type="text/javascript" 
    	src="http://maps.google.com/maps/api/js?sensor=false">
    </script>
    
    <script type="text/javascript">
      
      //  Creo una variable golbal que apunta la ventana en el mapa:
      var infowindow;
      
      function CargarMapa() {
      	
      	//  Creamos las opciones del mapa:
      	var opciones = {
					center: new google.maps.LatLng(37.386719, -5.981365), // nos colocamos en Sevilla  
					zoom: 17
				};
				//  Dibujamos el mapa:
      	var mapa = new google.maps.Map(document.getElementById("divmapa"), opciones);
  			
  			//  Añadimos la ventana al mapa, le damos contenido vacío (CON UN ESPACIO EN BLANCO) y sin coordenadas:
  			infowindow = new google.maps.InfoWindow({
  				map: mapa
  		//		content: " "  //  si no le ponemos un espacio, se queja, da un error pero funciona
  			});
  			
  			//  Le asignamos el evento click al MAPA:
  			google.maps.event.addListener(mapa, 'click', function(e) {
    			ponVentana(e.latLng, mapa);
  			});
      }  //  CargarMapa()
      
      
      function ponVentana(pos, mapica) {
      	//  Aquí NO creo una nueva ventana, si no que modifico la única que voy a tener:
      	infowindow.setContent("Latitud: " + pos.lat() + " <br />Longitud: " + pos.lng());
        infowindow.setPosition(pos); 
  		}
      
      window.onload = CargarMapa;
      
    </script>
  </head>
  
  <body>
    <h3>API v3 de Google Maps. EJERCICIO Eventos 3</h3>
    <p>El EJERCICIO consiste en poner una ventanica <b>Y SÓLO UNA</b> de info 
    	   con las coordenadas allí donde el usuario ha hecho click
    </p>

    <p>
    	<div id="divmapa">
    		Aquí pondremos el mapa
    	</div>
    </p>
  </body>
  
</html>
