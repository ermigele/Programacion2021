<!DOCTYPE html>
<html>
  <head>   
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <title>Ejemplo Web Storage</title>
    <script type="text/javascript">
      
      window.onload = function() {
      	
      	if (localStorage.nVisitas == null)
      //		localStorage.nVisitas = 0;
					localStorage.setItem("nVisitas", 0);
      		
      	localStorage.nVisitas++;
      	
      	document.getElementById("nvisitas").textContent = "Número de Visitas: " + localStorage.getItem("nVisitas");
      	
      	contenidoWebStorage();
      }
      
      function guardar() {
      	localStorage.dato = document.getElementById("dato").value;		
      }
      
      function leer() {
      	if (localStorage.dato) 
      		document.getElementById("sal").innerHTML = localStorage.dato;
      	else
      		document.getElementById("sal").innerHTML = "No se ha encontado dato";
      }
      
      function contenidoWebStorage() {
      	var l = localStorage.length;
      	var contenido = document.getElementById("contenido");
      	
      	contenido.innerHTML = "Total Elementos en localStorage: " + l + " <br />";
      	for (i in localStorage)
      		contenido.innerHTML += "Elemento '" + i + "': " + localStorage.getItem(i) + " <br />";
     /* 	
      	for (var i=0; i < l; i++)
      		contenido.innerHTML += "Elemento " + i + ": " + localStorage.getItem(i) + " <br />";
     */
    		l = sessionStorage.length;
    		contenido.innerHTML += "<br /><br /> Total Elementos en sessionStorage: " + l + " <br />";
    		for (i in sessionStorage)
      		contenido.innerHTML += "Elemento '" + i + "': " + sessionStorage.getItem(i) + " <br />";
	
      } 
      
      
    </script>
  </head>
  
  <body>

    <h3>Esto es un ejermplo de Web Storage</h3>
    
    <input type="text" name="dato" id="dato" placeholder="Pon aquí el dato a guardar" />
    <br /><br />
    <button onclick="guardar()" id="btGuardar">Guardar Dato</button> 
    <button onclick="leer()" id="btMostrar">Mostrar Dato</button> 
    <button onclick="contenidoWebStorage()" id="btContenidor">Contenido del Web Storage</button> 
    <p>
    	<div id="sal">
    		Aquí ponemos el dato leido del localStorage
    	</div>
    	<div id="nvisitas">
    		Aquí se muestra el número de visitas
    	</div>
    </p>
    <p>
    <div id="contenido">
    	Contenido de todo el Web Storage
    </div>
    </p>
    
  </body>
  
</html>
